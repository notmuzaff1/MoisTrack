<!DOCTYPE html>
<html lang="uz" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoisTrack - Kelajak Qishloq xo'jaligi</title>
    
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            500: '#22c55e', 
                            600: '#16a34a',
                            900: '#14532d',
                            accent: '#0ea5e9' 
                        },
                        dark: {
                            bg: '#0a0a0a',
                            surface: '#121212',
                            border: '#2a2a2a'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        
        body { background-color: #fafafa; }
        .dark body { background-color: #050505; }
        
        
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .dark .glass {
            background: rgba(20, 20, 20, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        .dark .glass-card {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .text-gradient {
            background: linear-gradient(to right, #22c55e, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #22c55e; border-radius: 4px; }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #22c55e;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="text-gray-800 dark:text-gray-200 transition-colors duration-300 antialiased selection:bg-brand-500 selection:text-white">

    
    <nav class="fixed w-full z-50 transition-all duration-300 top-0 glass" id="navbar">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-tr from-brand-500 to-brand-accent rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-500/30">
                        <i class="fa-solid fa-leaf text-xl"></i>
                    </div>
                    <span class="text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Mois<span class="text-brand-500">Track</span></span>
                </div>

                
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="#about" class="text-sm font-semibold hover:text-brand-500 transition">Haqida</a>
                    <a href="#ai-hub" class="text-sm font-semibold hover:text-brand-500 transition">AI Markaz</a>
                    <a href="#calculator" class="text-sm font-semibold hover:text-brand-500 transition">Kalkulyator</a>
                    <a href="#team" class="text-sm font-semibold hover:text-brand-500 transition">Jamoa</a>
                    
                    <button id="theme-toggle" class="p-2 rounded-full bg-gray-100 dark:bg-dark-surface hover:bg-gray-200 dark:hover:bg-gray-800 transition">
                        <i id="theme-icon" class="fa-solid fa-moon"></i>
                    </button>
                </div>

                
                <button id="mobile-menu-btn" class="md:hidden text-2xl focus:outline-none">
                    <i class="fa-solid fa-bars"></i>
                </button>
            </div>
        </div>
        
        <div id="mobile-menu" class="hidden md:hidden bg-white/95 dark:bg-dark-surface/95 backdrop-blur-xl absolute w-full border-b dark:border-gray-800">
            <div class="px-6 py-4 space-y-3">
                <a href="#about" class="block text-lg font-medium">Haqida</a>
                <a href="#ai-hub" class="block text-lg font-medium text-brand-500">AI Markaz</a>
                <a href="#calculator" class="block text-lg font-medium">Kalkulyator</a>
                <a href="#team" class="block text-lg font-medium">Jamoa</a>
            </div>
        </div>
    </nav>

    
    <header class="relative min-h-screen flex items-center justify-center overflow-hidden pt-20">
        
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8?auto=format&fit=crop&q=80" alt="Greenhouse" class="w-full h-full object-cover opacity-20 dark:opacity-10 scale-105 animate-[pulse_10s_ease-in-out_infinite]">
            <div class="absolute inset-0 bg-gradient-to-b from-transparent to-white dark:to-dark-bg"></div>
        </div>

        <div class="relative z-10 max-w-7xl mx-auto px-6 text-center">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-brand-500/10 border border-brand-500/20 text-brand-500 text-sm font-bold mb-6 animate__animated animate__fadeInDown">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-500 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-brand-500"></span>
                </span>
                MoisTrack Live
            </div>
            
            <h1 class="text-5xl md:text-7xl font-extrabold mb-6 leading-tight animate__animated animate__fadeInUp">
                O'simliklar <br>
                <span class="text-gradient">Tilini Tushuning</span>
            </h1>
            
            <p class="text-lg md:text-xl text-gray-600 dark:text-gray-400 mb-10 max-w-2xl mx-auto animate__animated animate__fadeInUp animate__delay-1s">
                IoT sensorlar va ilg'or Sun'iy Intellekt yordamida suvni tejang va tabiatni asrang.
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center animate__animated animate__fadeInUp animate__delay-1s">
                <a href="#ai-hub" class="group px-8 py-4 bg-brand-600 hover:bg-brand-500 text-white rounded-2xl font-bold shadow-lg shadow-brand-500/25 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2">
                    <i class="fa-solid fa-wand-magic-sparkles"></i> AI Yordamchi
                    <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                </a>
                <a href="#calculator" class="px-8 py-4 bg-white dark:bg-dark-surface text-gray-800 dark:text-white border border-gray-200 dark:border-dark-border rounded-2xl font-bold hover:bg-gray-50 dark:hover:bg-gray-800 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2">
                    <i class="fa-solid fa-calculator"></i> Kalkulyator
                </a>
            </div>
        </div>
    </header>

    
    <section id="calculator" class="py-24 relative bg-gray-50 dark:bg-dark-bg/50">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex justify-between items-end mb-12 reveal">
                <div>
                    <h2 class="text-3xl md:text-4xl font-bold mb-2">Iqtisodiy Kalkulyator</h2>
                    <p class="text-gray-500 dark:text-gray-400">MoisTrack yordamida qancha resurs tejashingizni hisoblang.</p>
                </div>
                <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 text-blue-500 rounded-2xl flex items-center justify-center text-2xl shadow-lg">
                    <i class="fa-solid fa-coins"></i>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-10 reveal">
                
                <div class="glass-card p-8 rounded-3xl border border-gray-200 dark:border-gray-700">
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-bold mb-2 text-gray-700 dark:text-gray-300">Ekin turi</label>
                            <select id="calc-crop" class="w-full bg-gray-100 dark:bg-dark-bg border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-500 transition">
                                <option value="paxta">Paxta</option>
                                <option value="bugdoy">Bug'doy</option>
                                <option value="pomidor">Pomidor/Sabzavot</option>
                                <option value="uzum">Uzum/Bog'</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-bold mb-2 text-gray-700 dark:text-gray-300">Yer maydoni (Gektar)</label>
                            <input type="number" id="calc-area" value="1" min="0.1" step="0.1" class="w-full bg-gray-100 dark:bg-dark-bg border border-gray-300 dark:border-gray-600 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-500 transition">
                        </div>
                        <button onclick="calculateResources()" class="w-full bg-brand-600 hover:bg-brand-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-brand-500/30 transition transform hover:scale-[1.02] flex justify-center items-center gap-2">
                            <i class="fa-solid fa-calculator"></i> Hisoblash
                        </button>
                    </div>
                </div>

                
                <div class="flex flex-col justify-center space-y-6">
                
                    <div class="glass-card p-6 rounded-3xl border-l-8 border-blue-500 relative overflow-hidden group">
                        <div class="absolute right-0 top-0 w-32 h-32 bg-blue-500/10 rounded-full -mr-10 -mt-10 group-hover:scale-125 transition duration-500"></div>
                        <h4 class="text-gray-500 dark:text-gray-400 text-sm font-bold uppercase mb-1">Tejaladigan Suv</h4>
                        <div class="flex items-baseline gap-2">
                            <span id="res-water-save" class="text-4xl font-extrabold text-blue-600 dark:text-blue-400">0</span>
                            <span class="text-xl font-medium text-gray-600 dark:text-gray-300">m¬≥ / yil</span>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">An'anaviy usulga nisbatan ~40% tejamkorlik</p>
                    </div>

                    
                    <div class="glass-card p-6 rounded-3xl border-l-8 border-yellow-500 relative overflow-hidden group">
                        <div class="absolute right-0 top-0 w-32 h-32 bg-yellow-500/10 rounded-full -mr-10 -mt-10 group-hover:scale-125 transition duration-500"></div>
                        <h4 class="text-gray-500 dark:text-gray-400 text-sm font-bold uppercase mb-1">Tejaladigan Mablag'</h4>
                        <div class="flex items-baseline gap-2">
                            <span id="res-money-save" class="text-4xl font-extrabold text-yellow-500">0</span>
                            <span class="text-xl font-medium text-gray-600 dark:text-gray-300">so'm</span>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">Suv va elektr energiyasi xarajatlari hisobidan</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <section id="ai-hub" class="py-24 bg-gray-100 dark:bg-dark-surface relative overflow-hidden">
    
        <div class="absolute top-0 left-0 w-full h-full opacity-30 pointer-events-none">
            <div class="absolute top-20 left-20 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl animate-pulse"></div>
            <div class="absolute bottom-20 right-20 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl animate-pulse" style="animation-delay: 2s"></div>
        </div>

        <div class="max-w-7xl mx-auto px-6 relative z-10">
            <div class="text-center mb-16 reveal">
                <span class="text-brand-500 font-bold tracking-widest uppercase text-sm">Sun'iy Intellekt Markazi</span>
                <h2 class="text-4xl md:text-5xl font-extrabold mt-2 mb-4">MoisTrack <span class="text-purple-500">AI Brain</span></h2>
                <p class="text-gray-500 max-w-xl mx-auto">Sun'iy Intellekt orqali o'simliklarni tahlil qiling va parvarish kartasini oling.</p>
            </div>

            
            <div class="grid lg:grid-cols-3 gap-8 reveal">
                
            
                <div class="lg:col-span-2 glass-card rounded-3xl p-1 flex flex-col h-[600px]">
                    <div class="bg-white/50 dark:bg-white/5 p-4 rounded-t-3xl border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white text-xs"><i class="fa-solid fa-robot"></i></div>
                            <div>
                                <h4 class="font-bold text-sm">Bot & Vision</h4>
                                <span class="text-[10px] text-green-500 flex items-center gap-1"><span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> Online</span>
                            </div>
                        </div>
                        
                        <div class="flex bg-gray-200 dark:bg-gray-800 rounded-lg p-1">
                            <button onclick="setMode('moisture')" id="btn-mode-m" class="px-3 py-1 text-xs font-bold rounded-md bg-white dark:bg-gray-600 shadow text-gray-800 dark:text-white transition">Namlik</button>
                            <button onclick="setMode('doctor')" id="btn-mode-d" class="px-3 py-1 text-xs font-bold rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-800 transition">Doktor</button>
                        </div>
                    </div>

                    
                    <div id="chat-box" class="flex-1 overflow-y-auto p-6 space-y-4 bg-white/30 dark:bg-black/20">
                        <div class="flex gap-3">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex-shrink-0 flex items-center justify-center text-white text-xs mt-1"><i class="fa-solid fa-robot"></i></div>
                            <div class="bg-white dark:bg-gray-800 p-3 rounded-2xl rounded-tl-none shadow-sm text-sm max-w-[80%]">
                                Salom! Men sizning AI yordamchingizman. Menga savol bering yoki o'simlik rasmini yuklang.
                            </div>
                        </div>
                    </div>

                    
                    <div class="p-4 bg-white dark:bg-gray-900 rounded-b-3xl border-t border-gray-200 dark:border-gray-700">
                        <div id="img-preview-area" class="hidden mb-2 relative inline-block">
                            <img id="img-preview" class="h-16 w-16 object-cover rounded-lg border border-purple-500">
                            <button onclick="clearImage()" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">√ó</button>
                        </div>
                        <div class="flex gap-2">
                            <label class="cursor-pointer p-3 text-gray-400 hover:text-purple-500 transition bg-gray-100 dark:bg-gray-800 rounded-xl">
                                <i class="fa-solid fa-camera"></i>
                                <input type="file" hidden accept="image/*" onchange="handleImage(this)">
                            </label>
                            <input type="text" id="chat-input" placeholder="Xabar yozing..." class="flex-1 bg-gray-100 dark:bg-gray-800 border-none rounded-xl px-4 focus:ring-2 focus:ring-purple-500 outline-none">
                            <button onclick="sendChat()" class="p-3 bg-purple-600 hover:bg-purple-500 text-white rounded-xl transition shadow-lg shadow-purple-500/30">
                                <i class="fa-solid fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                
                <div class="space-y-6 flex flex-col justify-center">
                    
                    <div class="glass-card p-6 rounded-3xl hover:border-brand-500/50 transition duration-300 max-w-xl mx-auto w-full">
                        <h3 class="font-bold mb-4 flex items-center gap-2"><i class="fa-solid fa-id-card text-brand-500"></i> Parvarish Kartasi</h3>
                        <div class="flex gap-2 mb-4">
                            <input type="text" id="plant-name-card" placeholder="O'simlik nomi..." class="w-full bg-gray-50 dark:bg-gray-800 border-none rounded-lg px-3 py-2 text-sm">
                            <button onclick="createCard()" class="bg-brand-500 text-white px-3 rounded-lg hover:bg-brand-600"><i class="fa-solid fa-magic"></i></button>
                        </div>
                        
                        <div id="card-result" class="hidden bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-800 dark:to-gray-900 p-4 rounded-xl border border-green-200 dark:border-gray-700">
                            <h4 id="res-title" class="font-bold text-green-800 dark:text-green-400">--</h4>
                            <div class="grid grid-cols-2 gap-2 mt-2 text-xs">
                                <div class="bg-white/60 dark:bg-black/30 p-1 rounded">‚òÄÔ∏è <span id="res-light">--</span></div>
                                <div class="bg-white/60 dark:bg-black/30 p-1 rounded">üíß <span id="res-water">--</span></div>
                                <div class="bg-white/60 dark:bg-black/30 p-1 rounded">üå± <span id="res-soil">--</span></div>
                                <div class="bg-white/60 dark:bg-black/30 p-1 rounded">üå°Ô∏è <span id="res-temp">--</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <section id="team" class="py-24">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16 reveal">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Bizning Jamoa</h2>
                <p class="text-gray-500">Innovatsiyalar ortidagi iqtidorlar.</p>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 reveal">
                
                <div class="glass-card p-6 rounded-3xl text-center group hover:-translate-y-2 transition duration-300">
                    <div class="w-24 h-24 mx-auto rounded-full overflow-hidden mb-4 border-2 border-brand-500 p-1">
                        <img src="Abdulaziz.jpg" class="w-full h-full rounded-full bg-gray-100">
                    </div>
                    <h3 class="font-bold text-lg leading-tight mb-1">Muzaffarov Abdulaziz</h3>
                    <p class="text-brand-500 text-xs font-bold uppercase mb-2">CEO</p>
                    <div class="flex justify-center gap-1 flex-wrap">
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">C++</span>
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">IoT</span>
                    </div>
                    <div class="mt-4 flex justify-center gap-3 text-gray-400">
                        <a href="https://t.me/notmuzaff" class="hover:text-brand-500"><i class="fa-brands fa-telegram"></i></a>

                    </div>
                </div>
                
                <div class="glass-card p-6 rounded-3xl text-center group hover:-translate-y-2 transition duration-300">
                    <div class="w-24 h-24 mx-auto rounded-full overflow-hidden mb-4 border-2 border-blue-500 p-1">
                        <img src="Zakariyo.jpg" class="w-full h-full rounded-full bg-gray-100">
                    </div>
                    <h3 class="font-bold text-lg leading-tight mb-1">Qarshiyev Zakariyo</h3>
                    <p class="text-blue-500 text-xs font-bold uppercase mb-2">CTO</p>
                    <div class="flex justify-center gap-1 flex-wrap">
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">HTML</span>
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">CSS</span>
                    </div>
                    <div class="mt-4 flex justify-center gap-3 text-gray-400">
                        <a href="https://t.me/yashnarv1c" class="hover:text-blue-500"><i class="fa-brands fa-telegram"></i></a>
                    </div>
                </div>
                
                <div class="glass-card p-6 rounded-3xl text-center group hover:-translate-y-2 transition duration-300">
                    <div class="w-24 h-24 mx-auto rounded-full overflow-hidden mb-4 border-2 border-yellow-500 p-1">
                        <img src="Mirjalol.jpg" class="w-full h-full rounded-full bg-gray-100">
                    </div>
                    <h3 class="font-bold text-lg leading-tight mb-1">Rahimov Mirjalol</h3>
                    <p class="text-yellow-500 text-xs font-bold uppercase mb-2">PM</p>
                    <div class="flex justify-center gap-1 flex-wrap">
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">Agile</span>
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">Sales</span>
                    </div>
                    <div class="mt-4 flex justify-center gap-3 text-gray-400">
                        <a href="https://t.me/Imacroissant" class="hover:text-yellow-500"><i class="fa-brands fa-telegram"></i></a>
                    </div>
                </div>
               
                <div class="glass-card p-6 rounded-3xl text-center group hover:-translate-y-2 transition duration-300">
                    <div class="w-24 h-24 mx-auto rounded-full overflow-hidden mb-4 border-2 border-purple-500 p-1">
                        <img src="Humoyunmirzo.jpg" class="w-full h-full rounded-full bg-gray-100">
                    </div>
                    <h3 class="font-bold text-lg leading-tight mb-1">Azimjonov Humoyun</h3>
                    <p class="text-purple-500 text-xs font-bold uppercase mb-2">Backend</p>
                    <div class="flex justify-center gap-1 flex-wrap">
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">Figma</span>
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">CSS</span>
                    </div>
                    <div class="mt-4 flex justify-center gap-3 text-gray-400">
                        <a href="https://t.me/stepbystep1e" class="hover:text-purple-500"><i class="fa-brands fa-telegram"></i></a>
                    </div>
                </div>
                
                <div class="glass-card p-6 rounded-3xl text-center group hover:-translate-y-2 transition duration-300">
                    <div class="w-24 h-24 mx-auto rounded-full overflow-hidden mb-4 border-2 border-red-500 p-1">
                        <img src="Behruz.jpg" class="w-full h-full rounded-full bg-gray-100">
                    </div>
                    <h3 class="font-bold text-lg leading-tight mb-1">Bekchanov Behruz</h3>
                    <p class="text-red-500 text-xs font-bold uppercase mb-2">Fullstack</p>
                    <div class="flex justify-center gap-1 flex-wrap">
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">C++</span>
                        <span class="px-2 py-0.5 bg-gray-100 dark:bg-gray-800 rounded text-[10px]">Python</span>
                    </div>
                    <div class="mt-4 flex justify-center gap-3 text-gray-400">
                        <a href="https://t.me/becko1602" class="hover:text-red-500"><i class="fa-brands fa-telegram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <footer class="bg-white dark:bg-dark-surface border-t border-gray-200 dark:border-gray-800 py-10">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-leaf text-brand-500"></i>
                <span class="font-bold text-gray-900 dark:text-white">MoisTrack</span>
            </div>
            <p class="text-sm text-gray-500">&copy; 2025 Barcha huquqlar himoyalangan.</p>
            <div class="flex gap-4">
                <a href="#" class="text-gray-400 hover:text-brand-500"><i class="fa-brands fa-github"></i></a>
                <a href="#" class="text-gray-400 hover:text-brand-500"><i class="fa-brands fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    
    <script>
        
        let GEMINI_API_KEY = "AIzaSyDLfJC1yqBWw3Lcia2a3JWBB_56FyDjsG8";
        let currentMode = "moisture";
        let selectedImg = null;

        
        const themeBtn = document.getElementById('theme-toggle');
        const html = document.documentElement;
        
        
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
            document.getElementById('theme-icon').classList.replace('fa-moon', 'fa-sun');
        }

        themeBtn.addEventListener('click', () => {
            html.classList.toggle('dark');
            const isDark = html.classList.contains('dark');
            localStorage.theme = isDark ? 'dark' : 'light';
            document.getElementById('theme-icon').className = isDark ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
        });

        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        
        function calculateResources() {
            const crop = document.getElementById('calc-crop').value;
            const area = parseFloat(document.getElementById('calc-area').value);
            
            if (!area || area <= 0) {
                alert("Iltimos, to'g'ri maydon kiriting!");
                return;
            }

            
            const waterUsage = {
                'paxta': 5500,
                'bugdoy': 4500,
                'pomidor': 3500,
                'uzum': 2500
            };

            const baseWater = waterUsage[crop] * area;
            const savingsPercent = 0.40;
            
            const savedWater = Math.round(baseWater * savingsPercent);
            
            
            const costPerM3 = 300; 
            const savedMoney = Math.round(savedWater * costPerM3);

            
            animateValue("res-water-save", 0, savedWater, 1500);
            animateValue("res-money-save", 0, savedMoney, 1500);
        }

        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const val = Math.floor(progress * (end - start) + start);
                obj.innerHTML = new Intl.NumberFormat('uz-UZ').format(val);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

   
        
        function checkKey() {
            if(!GEMINI_API_KEY) {
                GEMINI_API_KEY = prompt("Google Gemini API Kalitini Kiriting (Demo):");
                if(!GEMINI_API_KEY) return false;
            }
            return true;
        }

        async function callGemini(text, img = null) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${GEMINI_API_KEY}`;
            const parts = [{ text: text }];
            if (img) parts.push({ inlineData: { mimeType: "image/jpeg", data: img } });
            
            const res = await fetch(url, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ contents: [{ parts: parts }] })
            });
            const data = await res.json();
            if(data.error) throw new Error(data.error.message);
            return data.candidates[0].content.parts[0].text;
        }

        // Chat
        function setMode(m) {
            currentMode = m;
            const btnM = document.getElementById('btn-mode-m');
            const btnD = document.getElementById('btn-mode-d');
            if(m === 'moisture') {
                btnM.className = "px-3 py-1 text-xs font-bold rounded-md bg-white dark:bg-gray-600 shadow text-gray-800 dark:text-white transition";
                btnD.className = "px-3 py-1 text-xs font-bold rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-800 transition";
            } else {
                btnD.className = "px-3 py-1 text-xs font-bold rounded-md bg-blue-500 shadow text-white transition";
                btnM.className = "px-3 py-1 text-xs font-bold rounded-md text-gray-500 dark:text-gray-400 hover:text-gray-800 transition";
            }
        }

        function handleImage(input) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const base64 = e.target.result;
                    selectedImg = base64.split(',')[1];
                    document.getElementById('img-preview').src = base64;
                    document.getElementById('img-preview-area').classList.remove('hidden');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        function clearImage() {
            selectedImg = null;
            document.getElementById('img-preview-area').classList.add('hidden');
        }

        async function sendChat() {
            const input = document.getElementById('chat-input');
            const txt = input.value.trim();
            if((!txt && !selectedImg) || !checkKey()) return;

            // UI Add User Msg
            const box = document.getElementById('chat-box');
            let userHtml = `<div class="flex gap-3 justify-end"><div class="bg-brand-500 text-white p-3 rounded-2xl rounded-tr-none shadow-md text-sm max-w-[80%]">${txt}`;
            if(selectedImg) userHtml += `<br><img src="data:image/jpeg;base64,${selectedImg}" class="mt-2 h-20 rounded border border-white/50">`;
            userHtml += `</div></div>`;
            box.innerHTML += userHtml;
            input.value = '';
            
            const tempImg = selectedImg;
            clearImage();
            box.scrollTop = box.scrollHeight;

            // Loading
            const loadId = 'load-' + Date.now();
            box.innerHTML += `<div id="${loadId}" class="flex gap-3"><div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center text-white text-xs"><i class="fa-solid fa-robot"></i></div><div class="bg-white dark:bg-gray-800 p-3 rounded-2xl rounded-tl-none shadow-sm text-sm"><div class="loader"></div></div></div>`;
            box.scrollTop = box.scrollHeight;

            try {
                let prompt = "";
                if(currentMode === 'moisture') prompt = `Sen agronom-mutaxassissan. Foydalanuvchi: "${txt}". Javob o'zbek tilida, qisqa va aniq HTML formatida. Agar rasm bo'lsa, sug'orish bo'yicha maslahat ber.`;
                else prompt = `Sen o'simlik doktorisan. Foydalanuvchi: "${txt}". Rasm bo'lsa kasallikni aniqla. Javob o'zbek tilida.`;
                
                const reply = await callGemini(prompt, tempImg);
                document.getElementById(loadId).remove();
                box.innerHTML += `<div class="flex gap-3 animate__animated animate__fadeIn"><div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex-shrink-0 flex items-center justify-center text-white text-xs mt-1"><i class="fa-solid fa-robot"></i></div><div class="bg-white dark:bg-gray-800 p-3 rounded-2xl rounded-tl-none shadow-sm text-sm max-w-[80%] prose dark:prose-invert">${reply}</div></div>`;
            } catch(e) {
                document.getElementById(loadId).remove();
                alert(e.message);
            }
            box.scrollTop = box.scrollHeight;
        }

        // Care Card
        async function createCard() {
            const name = document.getElementById('plant-name-card').value;
            if(!name || !checkKey()) return;
            const btn = document.querySelector('button[onclick="createCard()"]');
            btn.innerHTML = '<div class="loader w-4 h-4 border-white border-t-transparent"></div>';
            btn.disabled = true;
            
            try {
                const prompt = `
                    Generate a valid JSON object for the plant "${name}" in Uzbek language.
                    Do not use markdown formatting. Do not include backticks.
                    Structure:
                    {
                        "title": "Plant Name",
                        "light": "Short advice",
                        "water": "Short advice",
                        "soil": "Short advice",
                        "temp": "Optimal range"
                    }
                `;
                const res = await callGemini(prompt);
                
                let jsonStr = res.trim();
                const firstBrace = jsonStr.indexOf('{');
                const lastBrace = jsonStr.lastIndexOf('}');
                
                if (firstBrace !== -1 && lastBrace !== -1) {
                    jsonStr = jsonStr.substring(firstBrace, lastBrace + 1);
                }
                
                const json = JSON.parse(jsonStr);
                
                document.getElementById('res-title').innerText = json.title || name;
                document.getElementById('res-light').innerText = json.light || "--";
                document.getElementById('res-water').innerText = json.water || "--";
                document.getElementById('res-soil').innerText = json.soil || "--";
                document.getElementById('res-temp').innerText = json.temp || "--";
                
                const cardResult = document.getElementById('card-result');
                cardResult.classList.remove('hidden');
                cardResult.classList.remove('animate__animated', 'animate__flipInX');
                void cardResult.offsetWidth; 
                cardResult.classList.add('animate__animated', 'animate__flipInX');

            } catch(e) { 
                console.error("Care Card Error:", e);
                alert("Ma'lumotni yuklashda xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring."); 
            } finally {
                btn.innerHTML = '<i class="fa-solid fa-magic"></i>';
                btn.disabled = false;
            }
        }

    </script>
</body>
</html>